{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.213.0"},"children":{"ECommerceOrderProcessingStack":{"id":"ECommerceOrderProcessingStack","path":"ECommerceOrderProcessingStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.213.0"},"children":{"OrdersTable":{"id":"OrdersTable","path":"ECommerceOrderProcessingStack/OrdersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/OrdersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"orderId","attributeType":"S"},{"attributeName":"timestamp","attributeType":"S"},{"attributeName":"customerId","attributeType":"S"},{"attributeName":"status","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"CustomerIdIndex","keySchema":[{"attributeName":"customerId","keyType":"HASH"}],"projection":{"projectionType":"ALL"}},{"indexName":"StatusIndex","keySchema":[{"attributeName":"status","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"orderId","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"sseSpecification":{"sseEnabled":true},"tableName":"ecommerce-orders"}}},"ScalingRole":{"id":"ScalingRole","path":"ECommerceOrderProcessingStack/OrdersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}}}},"OrderProcessingDLQ":{"id":"OrderProcessingDLQ","path":"ECommerceOrderProcessingStack/OrderProcessingDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/OrderProcessingDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":"alias/aws/sqs","queueName":"order-processing-dlq"}}}}},"OrderProcessingQueue":{"id":"OrderProcessingQueue","path":"ECommerceOrderProcessingStack/OrderProcessingQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/OrderProcessingQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":"alias/aws/sqs","queueName":"order-processing-queue","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["OrderProcessingDLQ2C6E2FE6","Arn"]},"maxReceiveCount":3},"visibilityTimeout":300}}}}},"LambdaExecutionRole":{"id":"LambdaExecutionRole","path":"ECommerceOrderProcessingStack/LambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.213.0","metadata":[]},"children":{"ImportLambdaExecutionRole":{"id":"ImportLambdaExecutionRole","path":"ECommerceOrderProcessingStack/LambdaExecutionRole/ImportLambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/LambdaExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ECommerceOrderProcessingStack/LambdaExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/LambdaExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["OrdersTable315BB997","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["OrdersTable315BB997","Arn"]},"/index/*"]]}]},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["OrderProcessingQueueAB52CA49","Arn"]}},{"Action":["bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream"],"Effect":"Allow","Resource":"*"},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"SMSNotificationsTopic2CA7FE20"}}],"Version":"2012-10-17"},"policyName":"LambdaExecutionRoleDefaultPolicy6D69732F","roles":[{"Ref":"LambdaExecutionRoleD5C26073"}]}}}}}}},"OrderIngestionLogGroup":{"id":"OrderIngestionLogGroup","path":"ECommerceOrderProcessingStack/OrderIngestionLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/OrderIngestionLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":7}}}}},"OrderIngestionFunction":{"id":"OrderIngestionFunction","path":"ECommerceOrderProcessingStack/OrderIngestionFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ECommerceOrderProcessingStack/OrderIngestionFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"ECommerceOrderProcessingStack/OrderIngestionFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"ECommerceOrderProcessingStack/OrderIngestionFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/OrderIngestionFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"966dd99e8645168a9bf89ab77a6936a7148acb4ea263e75abe81b054e3e66905.zip"},"environment":{"variables":{"ORDERS_TABLE_NAME":{"Ref":"OrdersTable315BB997"},"ORDER_QUEUE_URL":{"Ref":"OrderProcessingQueueAB52CA49"},"SNS_TOPIC_ARN":{"Ref":"SMSNotificationsTopic2CA7FE20"}}},"handler":"index.handler","loggingConfig":{"logGroup":{"Ref":"OrderIngestionLogGroup43C2F7A7"}},"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"python3.9","timeout":30}}}}},"OrderProcessingLogGroup":{"id":"OrderProcessingLogGroup","path":"ECommerceOrderProcessingStack/OrderProcessingLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/OrderProcessingLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":7}}}}},"OrderProcessingFunction":{"id":"OrderProcessingFunction","path":"ECommerceOrderProcessingStack/OrderProcessingFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ECommerceOrderProcessingStack/OrderProcessingFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"ECommerceOrderProcessingStack/OrderProcessingFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"ECommerceOrderProcessingStack/OrderProcessingFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/OrderProcessingFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"83d7b8ce3c2255be7f2be932557ce9930439d945975b0e6d0f981aec366d8645.zip"},"environment":{"variables":{"ORDERS_TABLE_NAME":{"Ref":"OrdersTable315BB997"},"SNS_TOPIC_ARN":{"Ref":"SMSNotificationsTopic2CA7FE20"}}},"handler":"index.handler","loggingConfig":{"logGroup":{"Ref":"OrderProcessingLogGroup0AD10187"}},"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"python3.9","timeout":300}}},"SqsEventSource:ECommerceOrderProcessingStackOrderProcessingQueue78921E3A":{"id":"SqsEventSource:ECommerceOrderProcessingStackOrderProcessingQueue78921E3A","path":"ECommerceOrderProcessingStack/OrderProcessingFunction/SqsEventSource:ECommerceOrderProcessingStackOrderProcessingQueue78921E3A","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/OrderProcessingFunction/SqsEventSource:ECommerceOrderProcessingStackOrderProcessingQueue78921E3A/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":10,"eventSourceArn":{"Fn::GetAtt":["OrderProcessingQueueAB52CA49","Arn"]},"functionName":{"Ref":"OrderProcessingFunctionE5F5791A"}}}}}}}},"ChatbotLogGroup":{"id":"ChatbotLogGroup","path":"ECommerceOrderProcessingStack/ChatbotLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ChatbotLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":7}}}}},"ChatbotFunction":{"id":"ChatbotFunction","path":"ECommerceOrderProcessingStack/ChatbotFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.213.0","metadata":[]},"children":{"Code":{"id":"Code","path":"ECommerceOrderProcessingStack/ChatbotFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.213.0"},"children":{"Stage":{"id":"Stage","path":"ECommerceOrderProcessingStack/ChatbotFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.213.0"}},"AssetBucket":{"id":"AssetBucket","path":"ECommerceOrderProcessingStack/ChatbotFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.213.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ChatbotFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"9dda7c25fd05c70a4d10e7b46b24d5ac701313d1a61faa3ca1f436acf7eb1f8f.zip"},"environment":{"variables":{"ORDERS_TABLE_NAME":{"Ref":"OrdersTable315BB997"},"BEDROCK_MODEL_ID":"anthropic.claude-v2"}},"handler":"index.handler","loggingConfig":{"logGroup":{"Ref":"ChatbotLogGroupCA8B968C"}},"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"python3.9","timeout":30}}}}},"ECommerceOrderAPI":{"id":"ECommerceOrderAPI","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"API for eCommerce order processing system","name":"ecommerce-order-api"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.213.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.213.0","metadata":[]}},"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ECommerceOrderAPICloudWatchRole1ABE7120","Arn"]}}}},"Deployment":{"id":"Deployment","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"API for eCommerce order processing system","restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ECommerceOrderAPIDeploymentA20AF15850fc7e263486b0ee4a0bea7e1f124b1a"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":true,"loggingLevel":"INFO","metricsEnabled":true,"throttlingBurstLimit":2000,"throttlingRateLimit":1000}],"restApiId":{"Ref":"ECommerceOrderAPI5952FE42"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"Default":{"id":"Default","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.213.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["ECommerceOrderAPI5952FE42","RootResourceId"]},"restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}}}},"orders":{"id":"orders","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ECommerceOrderAPI5952FE42","RootResourceId"]},"pathPart":"orders","restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}},"OPTIONS":{"id":"OPTIONS","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ECommerceOrderAPIordersFB535191"},"restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}}}},"POST":{"id":"POST","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..orders":{"id":"ApiPermission.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..orders","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/POST/ApiPermission.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..orders","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrderIngestionFunction9A74693D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"ECommerceOrderAPI5952FE42"},"/",{"Ref":"ECommerceOrderAPIDeploymentStageprodAF2CBB8F"},"/POST/orders"]]}}}},"ApiPermission.Test.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..orders":{"id":"ApiPermission.Test.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..orders","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/POST/ApiPermission.Test.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..orders","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrderIngestionFunction9A74693D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"ECommerceOrderAPI5952FE42"},"/test-invoke-stage/POST/orders"]]}}}},"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":true,"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrderIngestionFunction9A74693D","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ECommerceOrderAPIordersFB535191"},"restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}}}},"{orderId}":{"id":"{orderId}","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/{orderId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/{orderId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ECommerceOrderAPIordersFB535191"},"pathPart":"{orderId}","restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}},"OPTIONS":{"id":"OPTIONS","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/{orderId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/{orderId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ECommerceOrderAPIordersorderId41693804"},"restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}}}},"GET":{"id":"GET","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/{orderId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.GET..orders.{orderId}":{"id":"ApiPermission.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.GET..orders.{orderId}","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/{orderId}/GET/ApiPermission.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.GET..orders.{orderId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrderIngestionFunction9A74693D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"ECommerceOrderAPI5952FE42"},"/",{"Ref":"ECommerceOrderAPIDeploymentStageprodAF2CBB8F"},"/GET/orders/*"]]}}}},"ApiPermission.Test.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.GET..orders.{orderId}":{"id":"ApiPermission.Test.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.GET..orders.{orderId}","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/{orderId}/GET/ApiPermission.Test.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.GET..orders.{orderId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OrderIngestionFunction9A74693D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"ECommerceOrderAPI5952FE42"},"/test-invoke-stage/GET/orders/*"]]}}}},"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/orders/{orderId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":true,"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["OrderIngestionFunction9A74693D","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ECommerceOrderAPIordersorderId41693804"},"restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}}}}}}}},"chatbot":{"id":"chatbot","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/chatbot","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/chatbot/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ECommerceOrderAPI5952FE42","RootResourceId"]},"pathPart":"chatbot","restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}},"OPTIONS":{"id":"OPTIONS","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/chatbot/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/chatbot/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ECommerceOrderAPIchatbot9E6170AD"},"restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}}}},"POST":{"id":"POST","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/chatbot/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.213.0","metadata":[]},"children":{"ApiPermission.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..chatbot":{"id":"ApiPermission.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..chatbot","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/chatbot/POST/ApiPermission.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..chatbot","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatbotFunction1D8F8DA6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"ECommerceOrderAPI5952FE42"},"/",{"Ref":"ECommerceOrderAPIDeploymentStageprodAF2CBB8F"},"/POST/chatbot"]]}}}},"ApiPermission.Test.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..chatbot":{"id":"ApiPermission.Test.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..chatbot","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/chatbot/POST/ApiPermission.Test.ECommerceOrderProcessingStackECommerceOrderAPI7DD7866E.POST..chatbot","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ChatbotFunction1D8F8DA6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"ECommerceOrderAPI5952FE42"},"/test-invoke-stage/POST/chatbot"]]}}}},"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/Default/chatbot/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":true,"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ChatbotFunction1D8F8DA6","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ECommerceOrderAPIchatbot9E6170AD"},"restApiId":{"Ref":"ECommerceOrderAPI5952FE42"}}}}}}}}}},"ECommerceAPIKey":{"id":"ECommerceAPIKey","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/ECommerceAPIKey","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ApiKey","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/ECommerceAPIKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnApiKey","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::ApiKey","aws:cdk:cloudformation:props":{"enabled":true,"stageKeys":[{"restApiId":{"Ref":"ECommerceOrderAPI5952FE42"},"stageName":{"Ref":"ECommerceOrderAPIDeploymentStageprodAF2CBB8F"}}]}}}}},"ECommerceUsagePlan":{"id":"ECommerceUsagePlan","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/ECommerceUsagePlan","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.UsagePlan","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/ECommerceUsagePlan/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnUsagePlan","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::UsagePlan","aws:cdk:cloudformation:props":{"apiStages":[{"apiId":{"Ref":"ECommerceOrderAPI5952FE42"},"stage":{"Ref":"ECommerceOrderAPIDeploymentStageprodAF2CBB8F"},"throttle":{}}],"quota":{"limit":10000,"period":"DAY"},"throttle":{"burstLimit":200,"rateLimit":100},"usagePlanName":"ecommerce-usage-plan"}}},"UsagePlanKeyResource:ECommerceOrderProcessingStackECommerceOrderAPIECommerceAPIKey6F15EA45":{"id":"UsagePlanKeyResource:ECommerceOrderProcessingStackECommerceOrderAPIECommerceAPIKey6F15EA45","path":"ECommerceOrderProcessingStack/ECommerceOrderAPI/ECommerceUsagePlan/UsagePlanKeyResource:ECommerceOrderProcessingStackECommerceOrderAPIECommerceAPIKey6F15EA45","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnUsagePlanKey","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::UsagePlanKey","aws:cdk:cloudformation:props":{"keyId":{"Ref":"ECommerceOrderAPIECommerceAPIKey0291F290"},"keyType":"API_KEY","usagePlanId":{"Ref":"ECommerceOrderAPIECommerceUsagePlanCD7D5073"}}}}}}}},"SMSNotificationsTopic":{"id":"SMSNotificationsTopic","path":"ECommerceOrderProcessingStack/SMSNotificationsTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/SMSNotificationsTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"eCommerce Order SMS Notifications","topicName":"ecommerce-order-notifications"}}}}},"SMSSubscription":{"id":"SMSSubscription","path":"ECommerceOrderProcessingStack/SMSSubscription","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.213.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ECommerceOrderProcessingStack/SMSSubscription/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.213.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":"+31629408162","protocol":"sms","topicArn":{"Ref":"SMSNotificationsTopic2CA7FE20"}}}}}},"APIEndpoint":{"id":"APIEndpoint","path":"ECommerceOrderProcessingStack/APIEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"OrdersTableName":{"id":"OrdersTableName","path":"ECommerceOrderProcessingStack/OrdersTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"OrderQueueURL":{"id":"OrderQueueURL","path":"ECommerceOrderProcessingStack/OrderQueueURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"SNSTopicARN":{"id":"SNSTopicARN","path":"ECommerceOrderProcessingStack/SNSTopicARN","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.213.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ECommerceOrderProcessingStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ECommerceOrderProcessingStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.213.0"}},"Condition":{"id":"Condition","path":"ECommerceOrderProcessingStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.213.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ECommerceOrderProcessingStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.213.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ECommerceOrderProcessingStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.213.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}